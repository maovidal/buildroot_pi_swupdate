image autoboot.vfat {
	vfat {
		label = "AUTOBOOT"
		files = {
			"autoboot.txt"
		}
	}

	size = 1024K
}

image persistent.vfat {
	vfat {
		label = "Pesistent"
		files = {
			"persistent/.dummy"
		}
	}

	size = 1024K
}

image boot_a.vfat {
	vfat {
		label = "BOOT_A"
		files = {
			"bcm2709-rpi-2-b.dtb",
			"rpi-firmware/bootcode.bin",
			"rpi-firmware_a/cmdline.txt",
			"rpi-firmware_a/config.txt",
			"rpi-firmware_a/tryboot.txt",
			"rpi-firmware/fixup.dat",
			"rpi-firmware/start.elf",
			"zImage"
		}
	}

	size = 32M
}

image boot_b.vfat {
	vfat {
		label = "BOOT_B"
		files = {
			"bcm2709-rpi-2-b.dtb",
			"rpi-firmware/bootcode.bin",
			"rpi-firmware_b/cmdline.txt",
			"rpi-firmware_b/config.txt",
			"rpi-firmware_b/tryboot.txt",
			"rpi-firmware/fixup.dat",
			"rpi-firmware/start.elf",
			"zImage"
		}
	}

	size = 32M
}


image sdcard.img {
	hdimage {
		partition-table-type = mbr
	}

	partition autoboot {
		partition-type = 0xC
		image = "autoboot.vfat"
	}

	partition persistent {
		partition-type = 0xC
		image = "persistent.vfat"
	}

	partition dummy_3 {
		partition-type = 0x00
		size = 1K
	}

	partition dummy_4 {
		partition-type = 0x00
		size = 1K
	}

	partition boot_a {
		partition-type = 0xC
		bootable = "true"
		image = "boot_a.vfat"
	}

	partition rootfs_a {
		partition-type = 0x83
		image = "rootfs.ext4"
	}

	partition boot_b {
		partition-type = 0xC
		bootable = "true"
		image = "boot_b.vfat"
	}

	partition rootfs_b {
		partition-type = 0x83
		image = "rootfs.ext4"
	}

}
